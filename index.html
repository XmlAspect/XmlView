<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>XmlView - XmlAspect.org</title>
    <style>
        iframe{float:right; width:30%; height:10em;}
        fieldset {display: inline-block;vertical-align: top;border-radius: 1em;border-bottom: none;border-left: none;}
        input,iframe{width:100%;}
        .BookmarkletTag{ font-size:large; }
    </style>
    <script type="text/javascript">
        function BookmarkletBody(d,s,h)
        {
            d = document;
            h = d.getElementsByTagName('head')[0] || d.getElementsByTagName('div')[0] || document.documentElement;
            s = d.createElementNS ? d.createElementNS(h.namespaceURI || 'http://www.w3.org/1999/xhtml', 'script') : d.createElement('script');
            s.setAttribute('src', 'RunXslt.js');

            h.appendChild(s);           
        }
        function InitBookmarks()
        {
            var s = "" + BookmarkletBody;
            s = s.replace(/\s+/g, '').replace("BookmarkletBody", '');
            document.getElementById("BookmarkletTag").href = "javascript:(" + s + ")()";
        }
        function OnLoad()
        {
            $("XmlUrl").addEventListener("input",UpdateXml);
            InitBookmarks();
            UpdateXml();
        }
        function UpdateXml()
        {
            $("demoFrame").src= $("XmlUrl").value;
            InitBookmarks();
        }
        function $(id)
        {   var r = document.getElementById(id); 
            if( !r.addEventListener )
                r.addEventListener = x_addEventListener;
            return r;
        }
        function x_addEventListener ( ev, callback ){ return this.attachEvent( 'on'+ev,callback ) }

    </script>
</head>
<body onload="OnLoad();">
    <h1>XmlView - XmlAspect.org</h1>
    <main>
        <fieldset>
            <legend>Intro</legend>

        </fieldset>
        <fieldset>
            <legend>Bookmarklets</legend>
            1. Sample XML URL:
            <input type="text" placeholder="XML url" title="XML Url" value="countries.xml" id="XmlUrl"/>
       1. drag this link onto toolbar><a id="BookmarkletTag" href="#">XmlView</a><br />
            2. open <a href="countries.xml">countries.xml</a><br />
            3. Click on bookmarklet to run <a href="RunXslt.js">RunXslt.js</a> which should re-render XML as table
        </fieldset>
        <fieldset>
            <legend>XSLT</legend>
            <a href="AsTable.xsl">AsTable.xsl</a> and used by <a href="AsTable.xml">AsTable.xml</a> <br />
            TODO: AsBarChart, AsPieChart
        </fieldset>
        <fieldset>
            <legend>Links</legend>
            <ul>
                <li><a href="https://github.com/XmlAspect/XmlView">Sources</a></li>
                <li>Live docs and discussion at <a href="http://apifusion.com/wiki/index.php?title=XmlAspect.org/XmlView">ApiFusion.org</a></li>
                <li>Country list assembled from <a href="https://github.com/umpirsky/country-list/blob/master/country/cldr/en/country.xml">umpirsky/country-list</a> </li>
                <li><hr /></li>
                <li>TODO: CDN list</li>
            </ul>
        </fieldset>
    </main>
    XML from Url:
    <iframe id="demoFrame" >xml will be shown here
        TODO: use OBJECT instead of IFRAME: http://stackoverflow.com/questions/7315218/chrome-and-firefox-are-not-displaying-most-pdf-documents-in-an-iframe
    </iframe>
</body>
</html>
